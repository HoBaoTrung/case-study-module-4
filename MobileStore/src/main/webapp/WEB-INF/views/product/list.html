<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Mobile Store</title>
    <th:block th:insert="fragments/layout :: head"></th:block>
    <link rel="stylesheet" th:href="@{/css/product/list.css}">

</head>

<body>
<header th:replace="fragments/header :: header"></header>

<div class="container" style="margin-top: 10%">
    <div class="row">

        <!-- Cột lọc sản phẩm bên trái -->
        <div class="col-md-3 mb-4">
            <h2 class="mb-4 text-center">Bộ lọc</h2>
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    Bộ lọc
                </div>
                <div class="card-body">
                    <!--          <form method="get" th:action="@{/products}">-->

                    <!--            <div class="mb-3">-->
                    <!--              <label for="keyword" class="form-label">Tìm kiếm</label>-->
                    <!--              <input type="text" class="form-control" id="keyword" name="keyword"-->
                    <!--                     placeholder="Nhập tên sản phẩm..." th:value="${param.keyword}">-->
                    <!--            </div>-->

                    <!--            <div class="small-container">-->
                    <!--              <h5 class="mb-3">Danh mục:</h5>-->

                    <!--              <div th:each="cate : ${categories}">-->
                    <!--                <div class="form-check">-->
                    <!--                  <input class="form-check-input"-->
                    <!--                         type="checkbox"-->
                    <!--                         th:id="'cate_' + ${cate.categoryId}"-->
                    <!--                         name="cateID"-->
                    <!--                         th:value="${cate.categoryId}"-->
                    <!--                         th:checked="${param.cateID != null and (param.cateID.contains(cate.categoryId.toString()))}"-->
                    <!--                  >-->

                    <!--                  <label class="form-check-label" th:for="'cate_' + ${cate.categoryId}" th:text="${cate.categoryName}"></label>-->
                    <!--                </div>-->
                    <!--              </div>-->
                    <!--            </div>-->

                    <!--            <div class="small-container">-->
                    <!--              <label class="form-label">Chọn khoảng giá:</label>-->
                    <!--              <div class="range-slider-container">-->
                    <!--                <div class="price-labels">-->
                    <!--                  <span class="price-label min-label" id="minPriceLabel" th:text="${#numbers.formatInteger(minPrice, 0, 'COMMA') + '₫'}"></span>-->
                    <!--                  <span class="price-label max-label" id="maxPriceLabel" th:text="${#numbers.formatInteger(maxPrice, 0, 'COMMA') + '₫'}"></span>-->
                    <!--                </div>-->
                    <!--                <div class="range-slider">-->
                    <!--                  <input type="range" class="form-range" th:min="${minPrice}" th:max="${maxPrice}"-->
                    <!--                         step="10000"-->
                    <!--                         id="minPrice" name="minPrice"-->
                    <!--                         th:value="${param.minPrice != null ? param.minPrice : minPrice}">-->

                    <!--                  <input type="range" class="form-range" th:min="${minPrice}" th:max="${maxPrice}"-->
                    <!--                         step="10000"-->
                    <!--                         id="maxPrice" name="maxPrice"-->
                    <!--                         th:value="${param.maxPrice != null ? param.maxPrice : maxPrice}">-->
                    <!--                  <div class="slider-track"></div>-->
                    <!--                </div>-->
                    <!--              </div>-->
                    <!--            </div>-->

                    <!--            <div class="small-container">-->
                    <!--              <h5 class="mb-3">Hãng:</h5>-->
                    <!--              <div th:each="brand : ${brands}">-->
                    <!--                <div class="form-check">-->
                    <!--                  <input class="form-check-input" type="checkbox"-->
                    <!--                         th:id="'brand_'+${brand.brandId}"-->
                    <!--                         name="brandID"-->
                    <!--                         th:value="${brand.brandId}"-->
                    <!--                         th:checked="${param.brandId != null and (param.brandId.contains(brand.brandId.toString()))}"-->
                    <!--                  >-->

                    <!--                  <label class="form-check-label"-->
                    <!--                         th:for="'brand_'+${brand.brandId}"-->
                    <!--                         th:text="${brand.brandName}"></label>-->
                    <!--                </div>-->
                    <!--              </div>-->
                    <!--            </div>-->

                    <!--            <div class="d-grid">-->
                    <!--              <button type="submit" class="btn btn-primary">Áp dụng</button>-->
                    <!--            </div>-->
                    <!--          </form>-->
                    <form id="filterForm" method="get">
                        <!--              <input type="hidden" name="page" value="0"/>-->

                        <!-- Từ khóa tìm kiếm -->
                        <div class="mb-3">
                            <label for="keyword" class="form-label">Tìm kiếm</label>
                            <input type="text" class="form-control" id="keyword" name="keyword"
                                   placeholder="Nhập tên sản phẩm...">
                        </div>

                        <!-- Danh mục -->
                        <div class="small-container">
                            <h5 class="mb-3">Danh mục:</h5>
                            <div th:each="cate : ${categories}">
                                <div class="form-check">
                                    <input class="form-check-input"
                                           type="checkbox"
                                           th:id="'cate_' + ${cate.categoryId}"
                                           name="cateID"
                                           th:value="${cate.categoryId}">
                                    <label class="form-check-label"
                                           th:for="'cate_' + ${cate.categoryId}"
                                           th:text="${cate.categoryName}"></label>
                                </div>
                            </div>
                        </div>

                        <!-- Khoảng giá -->
                        <div class="small-container">
                            <label class="form-label">Chọn khoảng giá:</label>
                            <div class="range-slider-container">
                                <div class="price-labels">
        <span class="price-label min-label" id="minPriceLabel"
              th:text="${#numbers.formatInteger(minPrice, 0, 'COMMA') + '₫'}"></span>
                                    <span class="price-label max-label" id="maxPriceLabel"
                                          th:text="${#numbers.formatInteger(maxPrice, 0, 'COMMA') + '₫'}"></span>
                                </div>
                                <div class="range-slider">
                                    <input type="range" class="form-range"
                                           th:min="${minPrice}" th:max="${maxPrice}"
                                           step="10000" id="minPrice" name="minPrice"
                                           th:value="${minPrice}">

                                    <input type="range" class="form-range"
                                           th:min="${minPrice}" th:max="${maxPrice}"
                                           step="10000" id="maxPrice" name="maxPrice"
                                           th:value="${maxPrice}">
                                    <div class="slider-track"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Hãng -->
                        <div class="small-container">
                            <h5 class="mb-3">Hãng:</h5>
                            <div th:each="brand : ${brands}">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox"
                                           th:id="'brand_' + ${brand.brandId}"
                                           name="brandID"
                                           th:value="${brand.brandId}">
                                    <label class="form-check-label"
                                           th:for="'brand_' + ${brand.brandId}"
                                           th:text="${brand.brandName}"></label>
                                </div>
                            </div>
                        </div>

                        <!-- Nút lọc -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Áp dụng</button>
                        </div>

                    </form>

                </div>
            </div>
        </div>

        <!-- Cột danh sách sản phẩm bên phải -->
        <div class="col-md-9">
            <h2 class="mb-4 text-center">Danh sách sản phẩm</h2>
            <div id="productListContainer">
                <div th:replace="fragments/productList :: productListContent"></div>
            </div>

        </div>

        <!--    <div class="col-md-9">-->
        <!--      <h2 class="mb-4 text-center">Danh sách sản phẩm</h2>-->
        <!--      <div class="row row-cols-1 row-cols-md-3 g-4">-->
        <!--        <div th:each="p : ${products}" class="col-12 col-sm-6 col-lg-4">-->
        <!--          <div class="product-item">-->
        <!--            <div class="card h-100 shadow-sm">-->
        <!--              <div class="image-container">-->
        <!--                <img th:src="${p.imageUrl}" class="card-img-top product-image" th:alt="${p.productName}"-->
        <!--                     onerror="this.src='https://via.placeholder.com/300x200'">-->
        <!--              </div>-->
        <!--              <div class="card-body">-->
        <!--                <h5 class="card-title" th:text="${p.productName}"></h5>-->

        <!--                <p class="card-text text-danger fw-bold">-->
        <!--                  <span th:text="${#numbers.formatInteger(p.price, 0, 'COMMA') + '₫'}"></span>-->
        <!--                </p>-->

        <!--                <h6 class="text">Số lượng: <span th:text="${p.stockQuantity}"></span></h6>-->

        <!--                <a href="#" class="btn btn-primary w-100 mb-3">Xem chi tiết</a>-->
        <!--                <button th:if="${p.stockQuantity > 0}" class="btn btn-danger w-100 add-to-cart"-->
        <!--                        th:attr="data-id=${p.productId}, data-name=${p.productName}">-->
        <!--                  <i class="fa fa-shopping-cart"></i> Thêm vào giỏ-->
        <!--                </button>-->

        <!--                <h6 th:if="${p.stockQuantity == 0}" class="text-danger text-center">(Hết hàng)</h6>-->
        <!--              </div>-->
        <!--            </div>-->
        <!--          </div>-->
        <!--        </div>-->
        <!--      </div>-->

        <!--      <nav th:if="${totalPages > 0}" class="mt-4">-->
        <!--        <ul class="pagination">-->
        <!--          &lt;!&ndash; Previous &ndash;&gt;-->
        <!--          <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">-->
        <!--            <a class="page-link" th:href="@{/products(page=${currentPage - 1},-->
        <!--                            keyword=${param.keyword},-->
        <!--                            minPrice=${param.minPrice},-->
        <!--                            maxPrice=${param.maxPrice},-->
        <!--                            cateID=${param.cateID},-->
        <!--                            brandID=${param.brandID})}">Previous</a>-->
        <!--          </li>-->

        <!--          &lt;!&ndash; Page numbers &ndash;&gt;-->
        <!--          <li th:each="i : ${#numbers.sequence(1, totalPages)}"-->
        <!--              class="page-item" th:classappend="${i == currentPage} ? 'active'">-->
        <!--            <a class="page-link" th:href="@{/products(page=${i},-->
        <!--                            keyword=${param.keyword},-->
        <!--                            minPrice=${param.minPrice},-->
        <!--                            maxPrice=${param.maxPrice},-->
        <!--                            cateID=${param.cateID},-->
        <!--                            brandID=${param.brandID})}"-->
        <!--               th:text="${i}"></a>-->
        <!--          </li>-->

        <!--          &lt;!&ndash; Next &ndash;&gt;-->
        <!--          <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">-->
        <!--            <a class="page-link" th:href="@{/products(page=${currentPage + 1},-->
        <!--                            keyword=${param.keyword},-->
        <!--                            minPrice=${param.minPrice},-->
        <!--                            maxPrice=${param.maxPrice},-->
        <!--                            cateID=${param.cateID},-->
        <!--                            brandID=${param.brandID})}">Next</a>-->
        <!--          </li>-->
        <!--        </ul>-->
        <!--      </nav>-->

        <!--    </div>-->
    </div>
</div>

<footer th:replace="fragments/layout :: footer"></footer>
<script th:src="@{/js/product/list.js}"></script>
</body>
</html>